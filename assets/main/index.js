window.__require=function e(t,i,c){function o(s,a){if(!i[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!a&&l)return l(r,!0);if(n)return n(r,!0);throw new Error("Cannot find module '"+s+"'")}s=r}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){return o(t[s][1][e]||e)},h,h.exports,e,t,i,c)}return i[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<c.length;s++)o(c[s]);return o}({Juice:[function(e,t){"use strict";cc._RF.push(t,"709bbWJX+1FVbr6I8pl9xlC","Juice");var i=function(e,t){return Math.floor(Math.random()*(t-e)+e)};cc.Class({extends:cc.Component,properties:{particle:{default:null,type:cc.SpriteFrame},circle:{default:null,type:cc.SpriteFrame},slash:{default:null,type:cc.SpriteFrame}},init:function(e){this.particle=e.particle,this.circle=e.circle,this.slash=e.slash},showJuice:function(e,t){for(var c=this,o=function(o){var n=new cc.Node("Sprite");n.addComponent(cc.Sprite).spriteFrame=c.particle,n.parent=c.node;var s=359*Math.random(),a=(o=30*Math.random()+t/2,cc.v2(Math.sin(s*Math.PI/180)*o,Math.cos(s*Math.PI/180)*o));n.scale=.5*Math.random()+t/100;var r=.5*Math.random();n.position=e,n.runAction(cc.sequence(cc.spawn(cc.moveBy(r,a),cc.scaleTo(r+.5,.3),cc.rotateBy(r+.5,i(-360,360))),cc.fadeOut(.1),cc.callFunc(function(){n.active=!1},c)))},n=0;n<10;++n)o(n);for(var s=function(){var i=new cc.Node("Sprite");i.addComponent(cc.Sprite).spriteFrame=c.circle,i.parent=c.node;var o=359*Math.random(),n=30*Math.random()+t/2,s=cc.v2(Math.sin(o*Math.PI/180)*n,Math.cos(o*Math.PI/180)*n);i.scale=.5*Math.random()+t/100;var a=.5*Math.random();i.position=e,i.runAction(cc.sequence(cc.spawn(cc.moveBy(a,s),cc.scaleTo(a+.5,.3)),cc.fadeOut(.1),cc.callFunc(function(){i.active=!1},c)))},a=0;a<20;a++)s();var r=new cc.Node("Sprite");r.addComponent(cc.Sprite).spriteFrame=this.slash,r.parent=this.node,r.position=e,r.scale=0,r.angle=i(0,360),r.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2,t/150),cc.fadeOut(1)),cc.callFunc(function(){r.active=!1})))}}),cc._RF.pop()},{}],block_amin:[function(e,t){"use strict";cc._RF.push(t,"41a6aW2xE5Em4Wq907XXZsN","block_amin"),cc.Class({extends:cc.Component,properties:{sprites:{type:cc.SpriteAtlas,default:null},frameTime:.07,isLoop:!1,isPlayLoad:!1},onLoad:function(){this.isPlaying=!1,this.time=0,this.sprite=this.getComponent(cc.Sprite),this.spriteFs=this.sprites.getSpriteFrames(),this.spriteFrames=[];for(var e=0;e<this.spriteFs.length;e++){var t=this.sprites.getSpriteFrame("\u56fe\u5c42 "+(e+1));this.spriteFrames.splice(this.spriteFrames.length,0,t)}this.sprite||(this.sprite=this.addComponent(cc.Sprite)),this.isPlayLoad&&(this.isLoop?this.playLoop():this.playOnce())},playLoop:function(){this.spriteFrames.length<=0||(this.time=0,this.isLoop=!0,this.endFun=null,this.isPlaying=!0,this.sprite.spriteFrame=this.spriteFrames[0])},playOnce:function(){this.spriteFrames.length<=0||(this.time=0,this.isLoop=!1,this.endFun=null,this.isPlaying=!0,this.sprite.spriteFrame=this.spriteFrames[0])},update:function(e){if(this.isPlaying){this.time+=e;var t=Math.floor(this.time/this.frameTime);if(this.isLoop){for(;t>=this.spriteFrames.length;)t-=this.spriteFrames.length,this.time-=this.spriteFrames.length*this.frameTime;this.sprite.spriteFrame=this.spriteFrames[t]}else t>=this.spriteFrames.length?(this.isPlaying=!1,this.endFun&&this.endFun()):this.sprite.spriteFrame=this.spriteFrames[t]}}}),cc._RF.pop()},{}],block_com:[function(e,t){"use strict";cc._RF.push(t,"b687dHta41JJ6Oh7wgof4jW","block_com"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},init:function(e){this.block_type=e,this.can_collider=!0,this.is_collider=!1,e>=10&&(this.can_collider=!1),this.overnum=0},onBeginContact:function(e,t,i){77!=i.tag&&(this.is_collider=!0);var c=i.node.getComponent("block_com");if(c&&this.can_collider&&this.block_type==c.block_type){this.can_collider=!1,c.can_collider=!1;var o=this.node.getPosition(),n=i.node.getPosition(),s=o;o.y>n.y&&(s=n),this.node.removeFromParent(),i.node.removeFromParent(),game.AudioCollider(),game.createJuice(this.block_type,s,i.node.width),game.addScore(this.block_type),this.scheduleOnce(function(){game.createBlock(this.block_type+1,s,!0)}.bind(this),.23)}},onEndContact:function(){},onPreSolve:function(){},onPostSolve:function(){},update:function(){game.is_over||(this.node.y+this.node.height/2>game.node_line.y?(this.overnum++,110==this.overnum&&(cc.director.getPhysicsManager().enabled=!1),this.overnum>120&&game.gameOver()):this.overnum=0)}}),cc._RF.pop()},{}],game:[function(e,t){"use strict";cc._RF.push(t,"65149wNRdBA0b4kHLHA8RnG","game");var i=cc.Class({name:"JuiceItem",properties:{particle:cc.SpriteFrame,circle:cc.SpriteFrame,slash:cc.SpriteFrame}});cc.Class({extends:cc.Component,properties:{block_show:{type:cc.Node,default:null},wall_left:{type:cc.Node,default:null},wall_right:{type:cc.Node,default:null},block_down_arr:{type:[cc.Prefab],default:[]},label_score:{type:cc.Label,default:null},juices:{default:[],type:i},juicePrefab:{default:null,type:cc.Prefab},node_line:{type:cc.Node,default:null},layerOver:{type:cc.Node,default:null},layer_hecheng:{type:cc.Node,default:null},layer_particle:{type:cc.Node,default:null},audio_colli1:{type:cc.AudioClip,default:null},audio_colli2:{type:cc.AudioClip,default:null},audio_hecheng:{type:cc.AudioClip,default:null}},onLoad:function(){this.init(),this.setTouch(),window.game=this,this.can_touch_block=!1},init:function(){this.block_show.active=!1,this.node_line.active=!1,this.layerOver.active=!1,this.layerOver.zIndex=9,this.layer_hecheng.active=!1,this.layer_hecheng.zIndex=7,this.layer_particle.active=!1,this.layer_particle.zIndex=8,this.score_curr=0,this.label_score.string=this.score_curr,this.f_line=380,this.is_over=!1,cc.director.getPhysicsManager().enabled=!0,this.block_random=0,this.showBlock(),this.clearAllBlocks()},setTouch:function(){this.node.on("touchmove",function(e){var t=e.getLocation();t=this.node.convertToNodeSpaceAR(t),this.block_show.x=t.x},this),this.node.on("touchend",function(e){var t=e.getLocation();t=this.node.convertToNodeSpaceAR(t);var i=Math.abs(t.x)/1200;cc.tween(this.block_show).to(i,{position:{value:cc.v2(t.x,570),easing:"cubicOut"}}).call(this.node.pauseSystemEvents()).start(),this.scheduleOnce(function(){this.createBlock(this.block_random,cc.v2(t.x,570),!1),this.block_random=Math.floor(5*Math.random())},i+.05),this.scheduleOnce(function(){this.showBlock()},i+.1),this.scheduleOnce(function(){this.node.resumeSystemEvents()},i+.15)},this)},AudioCollider:function(){cc.audioEngine.play(this.audio_colli1,!1,1),cc.audioEngine.play(this.audio_colli2,!1,1)},AudioHecheng:function(){cc.audioEngine.play(this.audio_hecheng,!1,1)},showBlock:function(){this.block_show.active=!0,this.block_show.setPosition(cc.v2(0,570));for(var e=this.block_show.children,t=0;t<e.length;t++)e[t].name==this.block_random?e[t].active=!0:e[t].active=!1;this.block_show.scale=0,cc.tween(this.block_show).to(.15,{scale:1}).start()},createBlock:function(e,t,i){var c=cc.instantiate(this.block_down_arr[e]);c.parent=this.node,c.setPosition(t),c.getComponent("block_com").init(e),i&&(c.scale=0,cc.tween(c).to(.2,{scale:1}).start()),10==e&&(this.AudioHecheng(),this.showParticle(),this.showHecheng())},createJuice:function(e,t,i){var c=cc.instantiate(this.juicePrefab);c.parent=this.node;var o=c.getComponent("Juice");o.init(this.juices[e]),o.showJuice(t,i)},addScore:function(e){this.score_curr=this.score_curr+5*(e+1),this.label_score.string=this.score_curr},showLine:function(){for(var e=!1,t=this.node.children,i=0;i<t.length;i++){var c=t[i].getComponent("block_com");if(c&&c.is_collider&&t[i].y+t[i].height/2>this.f_line){e=!0;break}}this.node_line.active=!!e},showParticle:function(){var e=this.layer_particle.getChildByName("blue").getComponent(cc.ParticleSystem),t=this.layer_particle.getChildByName("green").getComponent(cc.ParticleSystem),i=this.layer_particle.getChildByName("lightgreen").getComponent(cc.ParticleSystem),c=this.layer_particle.getChildByName("purple").getComponent(cc.ParticleSystem),o=this.layer_particle.getChildByName("red").getComponent(cc.ParticleSystem),n=this.layer_particle.getChildByName("red2").getComponent(cc.ParticleSystem),s=this.layer_particle.getChildByName("white").getComponent(cc.ParticleSystem),a=this.layer_particle.getChildByName("yellow").getComponent(cc.ParticleSystem);this.layer_particle.active=!0,e.resetSystem(),t.resetSystem(),i.resetSystem(),c.resetSystem(),o.resetSystem(),n.resetSystem(),s.resetSystem(),a.resetSystem()},showHecheng:function(){var e=this.layer_hecheng.getChildByName("light_da"),t=this.layer_hecheng.getChildByName("bg_black").getComponent(cc.Animation),i=e.getComponent(cc.Animation),c=this.layer_hecheng.getChildByName("biggest").getComponent(cc.Animation);this.layer_hecheng.active=!0,t.play(),i.play(),e.angle=0,cc.tween(e).to(7.5,{angle:-720}).start(),c.play(),this.scheduleOnce(function(){this.layer_hecheng.active=!1},7.5)},gameOver:function(){var e=this;this.block_show.active=!1,this.node_line.active=!1,this.layerOver.getChildByName("label_fiscore").getComponent(cc.Label).string=this.score_curr;var t=cc.sys.localStorage.getItem("best_score");t||(t=0),t<this.score_curr&&(t=this.score_curr),this.layerOver.getChildByName("best_score").getChildByName("best_RichText").getComponent(cc.RichText).string=t,cc.sys.localStorage.setItem("best_score",t);var i=0;this.is_over=!0;for(var c=this.node.children,o=function(t){c[t].getComponent("block_com")&&(i<(s=.08+.005*t)&&(i=s),a=cc.delayTime(s),r=cc.callFunc(function(){var e=c[t].getComponent("block_com").block_type,i=c[t].getPosition(),o=c[t].width;this.createJuice(e,i,o),10==e&&this.createJuice(9,i,o),this.addScore(e),c[t].active=!1,this.AudioCollider()},e),l=cc.sequence(a,r),c[t].runAction(l))},n=0;n<c.length;n++){var s,a,r,l;o(n)}this.scheduleOnce(function(){this.layerOver.active=!0},i+1)},clearAllBlocks:function(){for(var e=this.node.children,t=e.length-1;t>=0;t--)e[t].getComponent("block_com")&&e[t].removeFromParent()},btnCallBack:function(e,t){"btn_replay"==t&&this.init(),"btn_all_game"==t&&(window.location.href="https://weibo.com/u/5622416838"),"btn_next_game"==t&&(window.location.href="https://weibo.com/u/5622416838")},update:function(){this.showLine()}}),cc._RF.pop()},{}]},{},["Juice","block_amin","block_com","game"]);